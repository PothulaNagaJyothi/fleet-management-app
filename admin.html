<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Fleet Management - Admin</title>
        <style>

        </style>
    </head>
    <body>
        <nav>
            <h1>Fleet Dashboard</h1>
            <label for="categoryFilter">Category:</label>
            <select id="categoryFilter">
                <option value="All">All</option>
                <option value="Auto">Auto</option>
                <option value="Car">Car</option>
                <option value="Truck">Truck</option>
                <option value="Bus">Bus</option>
            </select>
            <label for="availabilityFilter">Availability:</label>
            <select id="availabilityFilter">
                <option value="All">All</option>
                <option value="Available">Available</option>
                <option value="Unavailable">Unavailable</option>
            </select>
            <button id="clearFilterBtn">Clear Filter</button>
        </nav>
        <div class="layout">
            <aside>
                <h2>Add Fleet</h2>
                <div class="form-group">
                    <label for="regNo">Reg No of Vehicle</label>
                    <input id="regNo" type="text">
                </div>
                <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category">
                        <option vaue="">Select</option>
                        <option value="Auto">Auto</option>
                        <option value="Car">Car</option>
                        <option value="Truck">Truck</option>
                        <option value="Bus">Bus</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="driverName">Driver Name</label>
                    <input id="driverName" type="text">
                </div>
                <div class="checkbox-row">
                    <input type="checkbox" id="isAvailable" checked>
                    <label for="isAvailable">Available</label>
                </div>
                <button id="addFleetBtn">Add Fleet</button>
            </aside>

            <main>
                <h2>Fleet Vehicles</h2>
                <div id="cardsContainer"></div>
            </main>
        </div>
        <script>
            var fleets=[];
            var nextId=1;
            var regNoInput=document.getElementById("regNo");
            var categoryInput=document.getElementById("category");
            var driverInput=document.getElementById("driverName");
            var availInput=document.getElementById("isAvailable");
            var addBtn=document.getElementById("addFleetBtn");
            var cardsContainer=document.getElementById("cardsContainer");
            var categoryFilter=document.getElementById("categoryFilter");
            var availabilityFilter=document.getElementById("availabilityFilter");
            var clearFilterBtn=document.getElementById("clearFilterBtn");

            addBtn.addEventListener("click",function() {
                var regNo =regNoInput.value.trim();
                var category =categoryInput.value.trim();
                var driver = driverInput.value.trim();
                var isAvailable=availInput.checked;

                if(regNo ==="" || category==="" || driver==="")
            {
                alert("RegNo,Category and Driver Name are required.");
                return;
            }

            var fleet = {
                id: nextId++,
                regNo:regNo,
                category: category,
                driver : driver,
                available : isAvailable
            };

            fleets.push(fleet);
            regNoInput.value="";
            categoryInput.value="";
            driverInput.value="";
            availInput.checked =true;

            renderCards();
            });

            categoryFilter.addEventListener("change",renderCards);
            availabilityFilter.addEventListener("change",renderCards);
            clearFilterBtn.addEventListener("click",function(){
                categoryFilter.value="All";
                availabilityFilter.value="All";
                renderCards();
        });
        function renderCards() {
            cardsContainer.innerHTML ="";

            var selectedCategory=categoryFilter.value;
            var selectedAvailability= availabilityFilter.value;
            var filtered = fleets.filter(function (fleet) {
                var okCategory= selectedCategory==="All" || fleet.category===selectedCategory;
                var okAvailability=true;
                if(selectedAvailability==="Available")
            {
                okAvailability=fleet.available===true;
            }
            else if(selectedAvailability==="Unavailable") {
                okAvailability=fleet.available===false;
            }
            return okCategory && okAvailability;

            });

            filtered.forEach(function(fleet)
        {
            var card=document.createElement("div");
            card.className="card";
            var img = document.createElement("img");
            img.src="";//image addition
            img.alt="Vehicle";
            var title= document.createElement("h3");
            title.textContent=fleet.regNo;
            var catP=document.createElement("p");
            catP.textContent="Category:"+fleet.category;
            var driverP=document.createElement("p");
            driverP.textContent="Driver:"+fleet.driver;
            var statusP=document.createElement("p");
            statusP.textContent="Status:"+(fleet.available?"Available" : "Unavailable");
            var btnWrapper=document.createElement("div");
            btnWrapper.className="card-buttons";
            var updateBtn=document.createElement("button");
            updateBtn.textContent="Update Driver";
            updaeBtn.addEventListener("click",function(){
                updateDriver(fleet.id);
            });

            var toggleBtn=document.createElement("button");
            toggleBtn.textContent="Change Availability";
            toggleBtn.addEventListener("click",function () {
                toggleAvailability(fleet.id);
            });
            var deleteBtn= document.createElement("button");
            deleteBtn.textContent="Delete Vehicle";
            deleteBtn.addEventListener("click",function(){ 
                deleteFleet(fleet.id);
            });

            btnWrapper.appendChild(updateBtn);
            btnWrapper.appendChild(toggleBtn);
            btnWrapper.appendChild(deleteBtn);

            card.appendChild(img);
            card.appendChild(title);
            card.appendChild(catP);
            card.appendChild(driverP);
            card.appendChild(statusP);
            card.appendChild(btnWrapper);

            cardsContainer.appendChild(card);
        });

        }

        function findFleetIndexById(id) {
            for(var i=0;i<fleets.length;i++)
        {
            if(fleets[i].id===id)
            return i;
        }
        return -1;
        }

        function updateDriver(id) {
            var idx=findFleetIndexById(id);
            if(idx===-1) return;

            var currentName=fleets[idx].driver;
            var newName =prompt("enter new driver name:",currentName);
            if(newName===null) return;

            newName=newName.trim();
            if(newName==="")
        {
            alert("Driver name cannot be empty.");
            return;
        }

        fleets[idx].driver=newName;
        renderCards();
        }
        
        </script>
    </body>
</html>
